{% assign s = section.settings %}

<section class="py-10 md:py-20">
  <div class="md:w-11/12 mx-auto md:max-w-6xl {% if s.productPerSlideMobile == 2 and s.productPerSlideDesktop == 2 %} xs:w-[400px] md:w-[600px] {% endif %}">
    <!-- section header -->
    <div class="text-center {% if s.show_title %} pb-8{% endif %}">
      <h2 class="text-2xl md:text-4xl uppercase">
        {% if s.title != blank and s.show_title %}
          {{ s.title }}
        {% endif %}
      </h2>

      {% if s.collection_link != blank %}
        <a href="collections/all/{{ page.metafields.custom.ingr_dient_balise | handle }}" class="text-sm underline mt-3 GrotesqueBold heading-color">{{ s.collection_link }}</a>
      {% endif %}
    </div>

    {% if page.metafields.custom.ingr_products_list.value.count > 0 %}
      <div class="mt-10 scrollbar flex relative overflow-hidden md:overflow-x-auto overflow-x-scroll ml-5 md:ml-0 snap-mandatory md:snap-none gap-[10px] md:gap-5 snap-x md:snap-x-none">
        {% for product in page.metafields.custom.ingr_products_list.value %}
          <div class="w-1/4 min-w-[200px] md:min-w-0 text-left {% if forloop.last %}mr-5 md:mr-0{% endif %}">
            {% render 'card-product'
              product: product,
              card_product: product,
              show_secondary_image: true,
              show_vendor: true,
              show_quick_add: true
            %}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    {% comment %}
      <!-- section carousel -->
      <tail-carousel slidesToShow="xs:{{ s.productPerSlideMobile }} md:{{ s.productPerSlideDesktop }}">
        <carousel-container>
          <carousel-content class="w-full">
            {% paginate collections.all.products by 1000 %}
              {% for product in collections.all.products %}
                {% if product.tags contains page.metafields.custom.ingr_dient_balise %}
                  <carousel-panel class="px-2">
                    {% render 'card-product'
                      product: product,
                      card_product: product,
                      show_secondary_image: s.show_secondary_image,
                      show_vendor: true,
                      show_quick_add: s.show_cta
                    %}
                  </carousel-panel>
                {% endif %}
              {% endfor %}
            {% endpaginate %}
          </carousel-content>
        </carousel-container>
        {% if s.show_dots %}
          <carousel-next class="md:flex hidden absolute z-[1] right-2 items-center justify-center h-8 p-2 my-auto cursor-pointer  disabled:opacity-50 disabled:cursor-not-allowed ">
            {% render 'icon-arrow-right' %}
          </carousel-next>
          <carousel-prev class=" md:flex hidden absolute left-2 z-[1] items-center justify-center h-8 p-2 my-auto  cursor-pointer  disabled:opacity-50 disabled:cursor-not-allowed">
            {% render 'icon-arrow-left' %}
          </carousel-prev>
          <carousel-dots class="relative flex justify-center mt-5">
            <carousel-dot class="w-[7px] h-[7px] m-1 transition-all bg-sable border-[1px] border-sable rounded-full selected:bg-ecorce selected:border-ecorce selected:border-[5px]">
            </carousel-dot>
          </carousel-dots>
        {% endif %}
      </tail-carousel>
    {% endcomment %}
  </div>
</section>
<style>
  .scrollbar::-webkit-scrollbar {
    display: none;
  }
</style>


{% schema %}
{
  "name": "Ingredient carousel",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Collection title",
      "default": "NOTRE SÃ‰LECTION",
      "info": "if empty it will show the collection title"
    },
    {
      "type": "text",
      "id": "collection_link",
      "label": "Collecion link",
      "default": "Voir tout",
      "info": "link to collection"
    },
    {
      "type": "number",
      "id": "limit",
      "default": 25,
      "label": "Maximum products to show"
    },
    {
      "type": "number",
      "id": "productPerSlideDesktop",
      "default": 4,
      "label": "Product par slide on desktop"
    },
    {
      "type": "number",
      "id": "productPerSlideMobile",
      "default": 2,
      "label": "Product par slide on mobile"
    },
    {
      "type": "checkbox",
      "id": "show_title",
      "label": "Show Title?",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_secondary_image",
      "label": "Show secondary image on hover?",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_cta",
      "label": "Show add to cart?",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_dots",
      "label": "Show dots?",
      "default": true
    }

  ],
  "presets": [{
    "name": "Ingredient Carousel"
  }]
}
{% endschema %}
